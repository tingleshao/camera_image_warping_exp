
%{
Features in image #8: 1530
Features in image #9: 1512
Features in image #10: 1511
Features in image #11: 1524
Features in image #12: 1493
Features in image #13: 1528
Features in image #14: 1514
Features in image #15: 1530
Features in image #16: 1461
Features in image #17: 1506
Features in image #18: 1464
Finding features, time: 0.695632 sec
Pairwise matchingPairwise matching, time: 2.663 sec
Initial camera intrinsics #1:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.1740574, -0.36006048, 3.2792919;
 -0.098858051, 1.0232912, 0.7665742;
 0.075532503, -0.15987128, 0.96633613]
Initial camera intrinsics #2:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.215305, -0.37340394, 1.9425142;
 -0.080188692, 1.0060999, 0.84923029;
 0.092589729, -0.16760705, 0.86527842]
Initial camera intrinsics #3:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.214149, -0.36706537, 0.55156785;
 -0.069627203, 1.0046723, 0.96464485;
 0.094100647, -0.16551322, 0.75250787]
Initial camera intrinsics #4:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.1850941, -0.35555232, -0.74523383;
 -0.031966597, 0.9851141, 0.98681593;
 0.11978766, -0.16138193, 0.62307602]
Initial camera intrinsics #5:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.1536634, -0.34207019, -1.9963051;
 -0.021173066, 0.97555006, 1.0143421;
 0.12894098, -0.15842575, 0.48268199]
Initial camera intrinsics #6:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.0731988, 0.058673091, -2.1799459;
 0.022349095, 0.94070846, 0.80213505;
 -0.041376583, -0.066237248, 0.92554098]
Initial camera intrinsics #7:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.1285871, -0.22387764, 3.4607749;
 -0.025645139, 0.97402215, -0.08010111;
 0.066723987, -0.092086203, 1.0456311]
Initial camera intrinsics #8:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.1382816, -0.093237564, 2.156903;
 -0.028980669, 0.97936124, -0.023751207;
 0.074237175, -0.048946105, 0.95957845]
Initial camera intrinsics #9:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.00867, 0.0034302671, 1.0948782;
 -0.0052471324, 1.0192341, 0.0061119804;
 -0.038411371, -0.0010364162, 1]
Initial camera intrinsics #10:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1, 0, 0;
 0, 1, 0;
 0, 0, 1]
Initial camera intrinsics #11:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.97449642, 0.015639886, -1.1379061;
 -0.013576026, 0.99158812, 0.0028882511;
 0.019636486, -0.0080687534, 0.97718036]
Initial camera intrinsics #12:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.91867369, -0.0029243433, -2.1339853;
 -0.0013823722, 0.98111975, 0.022663021;
 0.046675708, 0.0014556709, 0.92660171]
Initial camera intrinsics #13:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[1.0036592, -0.70100647, 3.520962;
 -0.0046133013, 0.77303439, -0.78621489;
 -0.067923583, 0.23400342, 0.4440212]
Initial camera intrinsics #14:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.89087129, -0.72966266, 2.5089779;
 0.039080728, 0.79792106, -0.80652636;
 -0.088222995, 0.23906672, 0.54907829]
Initial camera intrinsics #15:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.92267299, -0.70837057, 1.4720664;
 0.019502712, 0.78624791, -0.81421369;
 -0.076504983, 0.2381523, 0.63824207]
Initial camera intrinsics #16:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.9343918, -0.68961, 0.4567619;
 -0.0083978893, 0.762353, -0.80474722;
 -0.041875433, 0.23825414, 0.68383729]
Initial camera intrinsics #17:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.9029001, -0.66717809, -0.63137728;
 -0.038576361, 0.72654861, -0.73943025;
 -0.010308623, 0.25148708, 0.702838]
Initial camera intrinsics #18:
K:
[634.5759546018046, 0, 447.5;
 0, 634.5759546018046, 335;
 0, 0, 1]
R:
[0.85397315, -0.64317548, -1.6036092;
 -0.063790694, 0.71447343, -0.6622259;
 0.01465444, 0.2448782, 0.68791294]
Camera #1:
K:
[3255.540070715366, 0, 329.046041397361;
 0, 3404.690936956483, 363.9850586775106;
 0, 0, 1]
R:
[0.86361063, -0.027500492, 0.50340867;
 -0.070814557, 0.9819954, 0.17512923;
 -0.49916118, -0.18689215, 0.8461144]
Camera #2:
K:
[3235.031996544282, 0, 480.4274554720432;
 0, 3390.988474886135, 439.7852097118628;
 0, 0, 1]
R:
[0.93564188, -0.02758933, 0.35187078;
 -0.048647266, 0.97734475, 0.20598674;
 -0.34958211, -0.20984739, 0.91310275]
Camera #3:
K:
[3269.50425992855, 0, 795.3600337144923;
 0, 3416.282747625967, 407.0816732323378;
 0, 0, 1]
R:
[0.97210526, -0.022348475, 0.23347791;
 -0.027220704, 0.97797334, 0.20694728;
 -0.2329601, -0.20753001, 0.95008475]
Camera #4:
K:
[3413.636851406788, 0, 838.6849540583647;
 0, 3490.607011282675, 364.4235321272666;
 0, 0, 1]
R:
[0.99900877, -0.017397743, 0.040972482;
 0.0091174394, 0.98091716, 0.19421178;
 -0.043569468, -0.19364572, 0.98010361]
Camera #5:
K:
[3568.125082823375, 0, 781.1582538202266;
 0, 3576.659213567482, 338.465787991234;
 0, 0, 1]
R:
[0.98507005, -0.0090188002, -0.17191744;
 0.040781233, 0.98242766, 0.18213417;
 0.16725382, -0.18642595, 0.96812785]
Camera #6:
K:
[3291.238282350683, 0, -378.9490166689553;
 0, 3446.03652731499, 137.7425209246454;
 0, 0, 1]
R:
[0.76044953, -0.024379306, -0.64893913;
 0.10291863, 0.99119008, 0.083366677;
 0.64118958, -0.13018408, 0.75625926]
Camera #7:
K:
[3268.313588078093, 0, 332.8183616802963;
 0, 3479.507958675427, 586.6332778557115;
 0, 0, 1]
R:
[0.8596406, -0.038874906, 0.50941807;
 -0.0042285211, 0.99652535, 0.083182842;
 -0.51088178, -0.073661439, 0.85648924]
Camera #8:
K:
[3279.114057293446, 0, 527.935960450146;
 0, 3486.212453517419, 417.0699064398828;
 0, 0, 1]
R:
[0.93008626, -0.012020626, 0.36714429;
 -0.0026886966, 0.99921489, 0.039526455;
 -0.36733121, -0.037750166, 0.92932379]
Camera #9:
K:
[3330.241871266968, 0, 599.2283269631002;
 0, 3509.129276224756, 373.5776401026226;
 0, 0, 1]
R:
[0.98199564, 0.0024574157, 0.18888719;
 -0.0083162189, 0.99950832, 0.030231141;
 -0.18872005, -0.031257685, 0.98153341]
Camera #10:
K:
[3429.771238339421, 0, 643.2287381545718;
 0, 3537.357379365119, 268.4576489610731;
 0, 0, 1]
R:
[1, 5.3551048e-09, -7.4505806e-09;
 5.5879354e-09, 0.99999994, -3.7252903e-09;
 -7.4505806e-09, 0, 1]
Camera #11:
K:
[3525.773809191394, 0, 809.6093266014607;
 0, 3549.173710610333, 566.8312774676189;
 0, 0, 1]
R:
[0.98640871, 0.024689354, -0.16244432;
 -0.011298671, 0.99649841, 0.082845487;
 0.16392091, -0.079884119, 0.98323375]
Camera #12:
K:
[3649.849724775891, 0, 525.8727878002393;
 0, 3612.7022906928, 367.1513850418384;
 0, 0, 1]
R:
[0.90749973, 0.0043058223, -0.42003047;
 0.0091561396, 0.99950713, 0.030028488;
 0.41995275, -0.031096708, 0.90701312]
Camera #13:
K:
[3300.084865691623, 0, 337.6091905119189;
 0, 3536.855565342351, 401.1007264813717;
 0, 0, 1]
R:
[0.85988671, 0.010700978, 0.5103727;
 0.066568628, 0.98889273, -0.13289034;
 -0.50612593, 0.14824545, 0.84962338]
Camera #14:
K:
[3302.802363390083, 0, 584.9380640685283;
 0, 3529.501362900027, 391.6117155115897;
 0, 0, 1]
R:
[0.92319226, 0.011032755, 0.38417995;
 0.046230428, 0.98914248, -0.13949853;
 -0.38154778, 0.14654478, 0.91265875]
Camera #15:
K:
[3372.704848426843, 0, 771.7138787708568;
 0, 3567.18363122025, 484.9603407590873;
 0, 0, 1]
R:
[0.97115242, 0.010194737, 0.23824139;
 0.017917905, 0.99314147, -0.11553755;
 -0.23778529, 0.11647337, 0.96430916]
Camera #16:
K:
[3480.171309406079, 0, 470.6994238636155;
 0, 3619.731037276267, 341.7787829178149;
 0, 0, 1]
R:
[0.9989506, 0.0070567792, -0.045253247;
 -0.014053411, 0.98762316, -0.15621488;
 0.043590769, 0.1566869, 0.98668599]
Camera #17:
K:
[3504.908069284257, 0, 513.9475069628782;
 0, 3631.825575118933, 467.2461611397852;
 0, 0, 1]
R:
[0.97012693, 0.024294429, -0.24137847;
 -0.0525437, 0.99239737, -0.11129551;
 0.2368395, 0.1206537, 0.96402788]
Camera #18:
K:
[3528.661685030444, 0, 938.3038241084466;
 0, 3647.262468254175, 512.4744589184799;
 0, 0, 1]
R:
[0.94669706, 0.037624527, -0.31992024;
 -0.071005322, 0.99310088, -0.093321994;
 0.31420189, 0.1110637, 0.94283724]
Camera R after waveCorrect: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
Camera R after waveCorrect: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
Camera R after waveCorrect: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
Camera R after waveCorrect: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
Camera R after waveCorrect: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
Camera R after waveCorrect: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
Camera R after waveCorrect: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
Camera R after waveCorrect: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
Camera R after waveCorrect: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
Camera R after waveCorrect: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
Camera R after waveCorrect: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
Camera R after waveCorrect: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
Camera R after waveCorrect: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
Camera R after waveCorrect: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
Camera R after waveCorrect: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
Camera R after waveCorrect: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
Camera R after waveCorrect: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
Camera R after waveCorrect: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
Warping images (auxiliary)...
Camera R before warp: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
Camera R after warp: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
Camera R after mask warp: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
Corners and Sizes: 1
Corners:
[478, 2204]Sizes:
[393 x 290]
Camera R before warp: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
Camera R after warp: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
Camera R after mask warp: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
Corners and Sizes: 2
Corners:
[185, 2221]Sizes:
[390 x 281]
Camera R before warp: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
Camera R after warp: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
Camera R after mask warp: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
Corners and Sizes: 3
Corners:
[-114, 2242]Sizes:
[379 x 270]
Camera R before warp: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
Camera R after warp: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
Camera R after mask warp: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
Corners and Sizes: 4
Corners:
[-391, 2237]Sizes:
[364 x 269]
Camera R before warp: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
Camera R after warp: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
Camera R after mask warp: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
Corners and Sizes: 5
Corners:
[-654, 2227]Sizes:
[355 x 271]
Camera R before warp: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
Camera R after warp: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
Camera R after mask warp: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
Corners and Sizes: 6
Corners:
[-937, 2199]Sizes:
[369 x 274]
Camera R before warp: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
Camera R after warp: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
Camera R after mask warp: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
Corners and Sizes: 7
Corners:
[485, 2008]Sizes:
[373 x 263]
Camera R before warp: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
Camera R after warp: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
Camera R after mask warp: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
Corners and Sizes: 8
Corners:
[187, 2012]Sizes:
[372 x 263]
Camera R before warp: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
Camera R after warp: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
Camera R after mask warp: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
Corners and Sizes: 9
Corners:
[-91, 2015]Sizes:
[364 x 261]
Camera R before warp: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
Camera R after warp: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
Camera R after mask warp: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
Corners and Sizes: 10
Corners:
[-361, 2015]Sizes:
[354 x 259]
Camera R before warp: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
Camera R after warp: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
Camera R after mask warp: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
Corners and Sizes: 11
Corners:
[-640, 2015]Sizes:
[343 x 259]
Camera R before warp: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
Camera R after warp: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
Camera R after mask warp: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
Corners and Sizes: 12
Corners:
[-896, 2023]Sizes:
[333 x 254]
Camera R before warp: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
Camera R after warp: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
Camera R after mask warp: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
Corners and Sizes: 13
Corners:
[487, 1778]Sizes:
[393 x 286]
Camera R before warp: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
Camera R after warp: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
Camera R after mask warp: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
Corners and Sizes: 14
Corners:
[193, 1771]Sizes:
[386 x 274]
Camera R before warp: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
Camera R after warp: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
Camera R after mask warp: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
Corners and Sizes: 15
Corners:
[-87, 1775]Sizes:
[367 x 259]
Camera R before warp: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
Camera R after warp: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
Camera R after mask warp: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
Corners and Sizes: 16
Corners:
[-362, 1774]Sizes:
[361 x 258]
Camera R before warp: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
Camera R after warp: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
Camera R after mask warp: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
Corners and Sizes: 17
Corners:
[-658, 1785]Sizes:
[367 x 271]
Camera R before warp: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
Camera R after warp: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
Camera R after mask warp: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
Corners and Sizes: 18
Corners:
[-932, 1803]Sizes:
[364 x 279]
Warping images, time: 0.0595521 sec
Compositing...
Compositing image #1
Camera R before warp2: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
Multi-band blender, number of bands: 7
Compositing image #2
Camera R before warp2: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
Compositing image #3
Camera R before warp2: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
Compositing image #4
Camera R before warp2: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
Compositing image #5
Camera R before warp2: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
Compositing image #6
Camera R before warp2: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
Compositing image #7
Camera R before warp2: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
Compositing image #8
Camera R before warp2: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
Compositing image #9
Camera R before warp2: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
Compositing image #10
Camera R before warp2: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
Compositing image #11
Camera R before warp2: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
Compositing image #12
Camera R before warp2: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
Compositing image #13
Camera R before warp2: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
Compositing image #14
Camera R before warp2: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
Compositing image #15
Camera R before warp2: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
Compositing image #16
Camera R before warp2: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
Compositing image #17
Camera R before warp2: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
Compositing image #18
Camera R before warp2: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
Compositing, time: 0.881044 sec
last place: 1
R:
[0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593]
K:
[4467.252670251459, 0, 451.51703715477;
 0, 4671.917515718876, 499.4603629472285;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 2
R:
[0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267]
K:
[4439.111487187365, 0, 659.2426407603697;
 0, 4653.11499480279, 603.4733438224007;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 3
R:
[0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188]
K:
[4486.414333199992, 0, 1091.393181236934;
 0, 4687.823800403286, 558.5975451864092;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 4
R:
[0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469]
K:
[4684.193101135702, 0, 1150.843644720882;
 0, 4789.811568353549, 500.0620362938037;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 5
R:
[0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388]
K:
[4896.181880056344, 0, 1071.905496313111;
 0, 4907.892415797503, 464.4428151241761;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 6
R:
[0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009]
K:
[4516.23776267455, 0, -519.9939087930098;
 0, 4728.651942241102, 189.0103119733919;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 7
R:
[0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559]
K:
[4484.78049307276, 0, 456.6934157251261;
 0, 4774.581446370718, 804.9782893267964;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 8
R:
[0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255]
K:
[4499.600898871559, 0, 724.4338198314505;
 0, 4783.781355398099, 572.3034005892871;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 9
R:
[0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859]
K:
[4569.75849439676, 0, 822.2612179760409;
 0, 4815.227823636636, 512.6233049031296;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 10
R:
[0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737]
K:
[4706.332709784978, 0, 882.6385901224915;
 0, 4853.962431840125, 368.3776341623273;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 11
R:
[0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973]
K:
[4838.067454765477, 0, 1110.946063497884;
 0, 4870.176803698911, 777.8059808346483;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 12
R:
[0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592]
K:
[5008.324448434408, 0, 721.6027339503726;
 0, 4957.350732707968, 503.8051965535379;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 13
R:
[0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312]
K:
[4528.377045925249, 0, 463.267391909078;
 0, 4853.273842547876, 550.3904889795987;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 14
R:
[0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406]
K:
[4532.105996755574, 0, 802.652116663292;
 0, 4843.182404634527, 537.3696664211193;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 15
R:
[0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729]
K:
[4628.026199288684, 0, 1058.945923172645;
 0, 4894.8900199973, 665.462666766083;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 16
R:
[0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639]
K:
[4775.491696362562, 0, 645.8938340385744;
 0, 4966.995580033288, 468.9889073579743;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 17
R:
[0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574]
K:
[4809.435482714078, 0, 705.2388614416573;
 0, 4983.591707035109, 641.155266308176;
 0, 0, 1]
t
[0;
 0;
 0]
last place: 18
R:
[0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217]
K:
[4842.030198510945, 0, 1287.540676111091;
 0, 5004.774214570224, 703.2175446503388;
 0, 0, 1]
t
[0;
 0;
 0]
Finished, total time: 140.617 sec
cshao@red ~/dev/opencv_lab/opencv/samples/cpp (master) $ ls

%}
K1 = [4467.252670251459, 0, 451.51703715477;
 0, 4671.917515718876, 499.4603629472285;
 0, 0, 1];
R1 = [0.90035677, -0.015048588, 0.43489182;
 -0.05920532, 0.98587215, 0.15668705;
 -0.43110573, -0.16682217, 0.88674593];

K2 = [4439.111487187365, 0, 659.2426407603697;
 0, 4653.11499480279, 603.4733438224007;
 0, 0, 1];
R2 = [0.96034884, -0.013320856, 0.27848232;
 -0.040306933, 0.98173046, 0.18595868;
 -0.27587175, -0.18981001, 0.942267];

K3 = [4486.414333199992, 0, 1091.393181236934;
 0, 4687.823800403286, 558.5975451864092;
 0, 0, 1];
R3 = [0.98747694, -0.0082799848, 0.15754583;
 -0.021442555, 0.98231095, 0.18602562;
 -0.15629929, -0.18707421, 0.96983188];

K4 = [4684.193101135702, 0, 1150.843644720882;
 0, 4789.811568353549, 500.0620362938037;
 0, 0, 1];
R4 = [0.99931669, -0.0044434816, -0.036693335;
 0.010713774, 0.98495001, 0.17250681;
 0.035374567, -0.17278205, 0.98432469];

K5 = [4896.181880056344, 0, 1071.905496313111;
 0, 4907.892415797503, 464.4428151241761;
 0, 0, 1];
R5 = [0.96876627, 0.0033381199, -0.24795283;
 0.037696786, 0.98630571, 0.16056184;
 0.24509329, -0.16489397, 0.95537388];

K6 = [4516.23776267455, 0, -519.9939087930098;
 0, 4728.651942241102, 189.0103119733919;
 0, 0, 1];
R6 = [0.70742309, -0.016418569, -0.70659941;
 0.089191094, 0.99381196, 0.066202804;
 0.70113999, -0.10985577, 0.70451009];

K7 = [4484.78049307276, 0, 456.6934157251261;
 0, 4774.581446370718, 804.9782893267964;
 0, 0, 1];
R7 = [0.8971628, -0.035326976, 0.44028497;
 0.0076211849, 0.99788624, 0.064537451;
 -0.4416343, -0.054545112, 0.89553559];

K8 = [4499.600898871559, 0, 724.4338198314505;
 0, 4783.781355398099, 572.3034005892871;
 0, 0, 1];
R8 = [0.95609725, -0.011386484, 0.29282796;
 0.0060295267, 0.9997977, 0.019190006;
 -0.29298729, -0.016581912, 0.95597255];

K9 = [4569.75849439676, 0, 822.2612179760409;
 0, 4815.227823636636, 512.6233049031296;
 0, 0, 1];
R9 = [0.99381262, 0.0025353951, 0.11103965;
 -0.0035151658, 0.99995661, 0.008628659;
 -0.11101297, -0.008965604, 0.99377859];

K10 = [4706.332709784978, 0, 882.6385901224915;
 0, 4853.962431840125, 368.3776341623273;
 0, 0, 1];
R10 = [0.99690002, -0.0023737466, -0.078642502;
 0.0006352893, 0.99975502, -0.022123626;
 0.078675747, 0.022005077, 0.99665737];

K11 = [4838.067454765477, 0, 1110.946063497884;
 0, 4870.176803698911, 777.8059808346483;
 0, 0, 1];
R11 = [0.97048652, 0.028529665, -0.23946136;
 -0.01429578, 0.99803734, 0.060969308;
 0.24073079, -0.055746615, 0.96898973];

K12 = [5008.324448434408, 0, 721.6027339503726;
 0, 4957.350732707968, 503.8051965535379;
 0, 0, 1];
R12 = [0.8716386, 0.0043654144, -0.49012944;
 0.00043954048, 0.99995303, 0.0096878801;
 0.49014872, -0.008659767, 0.87159592];

K13 = [4528.377045925249, 0, 463.267391909078;
 0, 4853.273842547876, 550.3904889795987;
 0, 0, 1];
R13 = [0.89686608, -0.0033379728, 0.44228947;
 0.078295931, 0.98537761, -0.15133031;
 -0.43531704, 0.1703525, 0.88401312];

K14 = [4532.105996755574, 0, 802.652116663292;
 0, 4843.182404634527, 537.3696664211193;
 0, 0, 1];
R14 = [0.95022655, -0.0028740726, 0.31154636;
 0.055246815, 0.9856652, -0.15941161;
 -0.30662227, 0.1686891, 0.93676406];

K15 = [4628.026199288684, 0, 1058.945923172645;
 0, 4894.8900199973, 665.462666766083;
 0, 0, 1];
R15 = [0.9867993, -0.0013540946, 0.16194142;
 0.023791146, 0.99032789, -0.13669191;
 -0.16019003, 0.13874027, 0.97728729];

K16 = [4775.491696362562, 0, 645.8938340385744;
 0, 4966.995580033288, 468.9889073579743;
 0, 0, 1];
R16 = [0.99245918, -0.0076317182, -0.12233759;
 -0.014379737, 0.98391926, -0.17803442;
 0.12172902, 0.17845108, 0.97639];

K17 = [4809.435482714078, 0, 705.2388614416573;
 0, 4983.591707035109, 641.155266308176;
 0, 0, 1];
R17 = [0.94861865, 0.012374902, -0.31617957;
 -0.057154275, 0.98950046, -0.13274938;
 0.31121707, 0.14399956, 0.93936574];

K18 = [4842.030198510945, 0, 1287.540676111091;
 0, 5004.774214570224, 703.2175446503388;
 0, 0, 1];
R18 = [0.91922122, 0.02641619, -0.39285406;
 -0.077337801, 0.99042439, -0.11436135;
 0.38607126, 0.13550586, 0.91246217];



% construct H matrix: H = KRK^(-1), (true?)
% and try warping all images, see how the result look like

% Synthesize images, with colors
for i = 1:18
   eval(sprintf('img%d = imresize(imread(''mcam_%d_scale_2.jpg''),[920,1228]);',i,i));
end


% Warp the images
% Then show the result
for i = 1:18
    eval(sprintf('H%d = K%d * R%d * (K%d)^(-1);',i,i,i,i));
end


xMin = 0
xMax = 1000

yMin = 0
yMax = 1000

% Width and height of panorama.
width  = round(xMax - xMin);
height = round(yMax - yMin);
xLimits = [xMin xMax];
yLimits = [yMin yMax];
panoramaView = imref2d([height width], xLimits, yLimits);

T = projective2d(H1);
[I1w, RB1w] = imwarp(img1, T);

for i = 1:18
  %  eval(sprintf('T = projective2d(transpose(H%d));',i));
      eval(sprintf('T = projective2d(H%d'');',i));

  %  eval(sprintf('I = imwarp(''perspective'',H%d)',i));
%warpedImage = imwarp(img1, T, 'OutputView', panoramaView);\
    eval(sprintf('[I%d, RB%d] = imfuse(I%d,RB%d,I%d,RB%d,''blend'');',list(i+1),list(i+1),i,i,list(i),list(i)));
    eval(sprintf('[I%d, RB%d] = imwarp(img%d,T);',i,i,i));
    %figure;
    subplot(3,6,i);
    eval(sprintf('imshow(I%d)',i));
    eval(sprintf('X = RB%i.XWorldLimits; Y = RB%i.YWorldLimits',i,i));
    title([num2str(Y(1))]);
end

%[I12,RB12] = imfuse(I1,RB1,I2,RB2, 'blend');
%list = [1,12,123,1234,12345,123456,12345678,123456789,12345678910,1234567891011,1234567891012,1234567891013,1234567891014,1234567891015];
%for i = 2:14
%    eval(sprintf('[I%d,RB%d] = imfuse(I%d,RB%d,I%d,RB%d,''blend'');',list(i+1),list(i+1),i,i,list(i),list(i)));
%end


corners = [478, 2204, 393, 290;
           185, 2221, 390, 281;
           -114, 2242, 379, 270;
           -391, 2237, 364, 269;
           -654, 2227, 355, 271;
           -937, 2199, 369, 274;
           485, 2008, 373, 263;
           187, 2012, 372, 263;
           -91, 2015, 364, 261;
           -361, 2015, 354, 259;
           -640, 2015, 343, 259;
           -896, 2023, 333, 254;
           487, 1778, 393, 286;
           193, 1771, 386, 274;
           -87, 1775, 367, 259;
           -362, 1774, 361, 258;
           -658, 1785, 367, 271;
           -932, 1803, 364, 279];
 corners(:,2) = corners(:,2)-1770;
 corners(:,1) = corners(:,1) + 938;
figure;
hold on 
for i = 1:18
    rectangle('Position', corners(i,:));
end
hold off

result = uint8(zeros(938, 2513,3));
for i = 1:18
 %   Is1 = imresize(I1, [corners(i,4), corners(i,3)]);
  %  result(corners(i,2):corners(i,2)+corners(i,4)-1, corners(i,1):corners(i,1)+corners(i,3)-1,:) = Is1;
    eval(sprintf('Is%d = imresize(I%d, [corners(i,4), corners(i,3)]);',i,i));
   eval(sprintf('result(corners(i,2):corners(i,2)+corners(i,4)-1, corners(i,1):corners(i,1)+corners(i,3)-1,:) = result(corners(i,2):corners(i,2)+corners(i,4)-1, corners(i,1):corners(i,1)+corners(i,3)-1,:) +Is%d;',i));
end


